<!DOCTYPE html>
<html lang="id">
<head>
  <script src="auth-guard.js"></script>

  <link rel="manifest" href="manifest.webmanifest">
  <meta name="theme-color" content="#000000">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="mobile-web-app-capable" content="yes">
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
  <title>Obscura - Panduan</title>
  <link href="https://fonts.googleapis.com/css2?family=Cardo:wght@400;700&display=swap" rel="stylesheet">
  <style>
    body {
      margin: 0;
      padding: 70px 0 0 0; 
      font-family: 'Cardo', serif;
      background: radial-gradient(ellipse at center, #111 0%, #000 100%);
      color: #e0e0e0;
      line-height: 1.8;
    }
    .top-left-button {
      position: fixed;
      top: 16px;
      left: 16px;
      padding: 8px 14px;
      border-radius: 8px;
      text-decoration: none;
      font-size: 18px;
      z-index: 1000;
      border: 1px solid rgba(255, 255, 255, 0.1);
      background: rgba(255, 255, 255, 0.05);
      color: #e0e0e0;
      cursor: pointer;
      transition: background 0.3s ease;
    }
    .top-left-button:hover {
      background: rgba(255, 255, 255, 0.1);
    }
    .container {
      max-width: 800px;
      margin: 0 auto;
      padding: 20px 30px 50px 30px;
      opacity: 0;
      animation: fadeIn 1s ease forwards;
    }
    @keyframes fadeIn { to { opacity: 1; } }
    h1, h2, h3 {
      font-weight: 700;
      color: #fff;
    }
    h1 {
      text-align: center;
      font-size: 2.5em;
      margin-bottom: 20px;
    }
    h2 {
      border-bottom: 1px solid rgba(255,255,255,0.1);
      padding-bottom: 10px;
      margin-top: 40px;
      margin-bottom: 20px;
    }
    h3 {
        margin-top: 25px;
        margin-bottom: 5px;
    }
    p, li {
      font-size: 1.1em;
      color: #ccc;
      text-align: justify;
    }
    ul {
      list-style-type: none;
      padding-left: 0;
    }
    li {
      background: rgba(255,255,255,0.03);
      padding: 15px;
      border-radius: 8px;
      margin-bottom: 10px;
      border-left: 3px solid #4caf50;
    }
    strong, code {
      font-weight: 700;
      color: #fff;
    }
    code {
      background-color: rgba(0,0,0,0.3);
      padding: 2px 5px;
      border-radius: 4px;
      font-family: monospace;
    }
    .intro-box {
        background: rgba(0,0,0,0.2);
        padding: 20px;
        border-radius: 8px;
        margin-bottom: 20px;
        border: 1px solid rgba(255,255,255,0.05);
    }
    .credit {
      text-align: center;
      margin-top: 60px;
      color: #888;
      font-style: italic;
    }
  </style>
</head>
<body>

  <a href="main.html" class="top-left-button" title="Kembali ke Menu">‚Üê</a>

  <div class="container">
    <h1>Panduan Obscura</h1>

    <div class="intro-box">
      <p>Selamat datang di <strong>Obscura</strong>. Aplikasi web ini dirancang sebagai alat bantu komunikasi rahasia untuk pertunjukan sulap dan mentalism. Dikonsepkan oleh <strong>@pesulapgabut</strong>, proyek ini gratis dan didedikasikan untuk teman-teman terdekat.</p>
    </div>

    <h2>Langkah Awal: Persiapan</h2>
    <p>Sebelum dapat menggunakan Obscura, ada dua langkah wajib yang harus diselesaikan.</p>
    <ul>
      <li><strong>1. Membuat ID Pengguna</strong><br>Setiap pengguna harus memiliki ID permanen. Buka halaman <strong>Settings</strong>, lalu di bagian "ID Anda", masukkan 6 digit angka unik dan sistem akan menyimpannya secara otomatis.</li>
      <li><strong>2. Menghubungkan Partner</strong><br>Untuk berkomunikasi, Anda harus terhubung dengan partner. Masih di halaman <strong>Settings</strong>, masukkan 6 digit ID partner Anda di kolom "Partner", lalu tekan "Kirim Permintaan Koneksi". Partner Anda akan menerima notifikasi di Menu Utama dan harus menekan "Izinkan".</li>
    </ul>

    <h2>Penggunaan Dasar</h2>
    <p>Setelah terhubung, Anda dan partner Anda memiliki peran sebagai Pengirim (Sender) atau Penerima (Receiver).</p>
    
    <h3>Halaman Sender (Pengirim)</h3>
    <p>Halaman ini adalah "remote control" untuk mengirimkan informasi kepada Receiver.</p>
    <ul>
        <li><strong>Input Teks:</strong> Ketik pesan apa pun, lalu tekan <strong>Enter</strong> untuk mengirim.</li>
        <li><strong>Input Angka Cepat:</strong> Gunakan tombol angka (0-9) untuk mengirim satu digit angka secara instan.</li>
        <li><strong>Kalkulator Dasar:</strong> Lakukan perhitungan. Saat Anda menekan tombol <code>=</code>, hasilnya akan langsung terkirim dan display kalkulator akan bersih.</li>
    </ul>

    <h3>Halaman Receiver (Penerima)</h3>
    <p>Halaman ini berfungsi sebagai "layar" untuk menerima informasi secara diam-diam.</p>
    <ul>
        <li><strong>Menerima Data:</strong> Layar akan otomatis menampilkan data yang dikirimkan secara real-time.</li>
        <li><strong>Kontrol Suara (TTS):</strong> Secara default, suara **nonaktif**. Tekan ikon speaker untuk mengaktifkan/menonaktifkan fitur Text-to-Speech. Anda akan mendengar notifikasi "Voice On" atau "Voice Off".</li>
        <li><strong>Membersihkan Layar:</strong> Tekan tombol "Clear Display" di pojok kanan atas untuk membersihkan layar secara manual.</li>
    </ul>

    <h2>Fitur Lanjutan</h2>
    <p>Maksimalkan penggunaan Obscura dengan fitur-fitur canggih berikut.</p>
    <ul>
      <li><strong>Kalkulator Kode Kartu:</strong> Selain berhitung, kalkulator di halaman Sender dapat menerjemahkan angka menjadi kartu dari urutan Mnemonica. Masukkan angka dari <code>1</code> hingga <code>52</code> dan tekan <code>=</code>. Contoh: input <code>17</code> akan mengirim teks "9 Hati" ke Receiver.</li>
      <li><strong>Tombol Cepat (Custom Thump):</strong> Buat tombol preset Anda sendiri di halaman <strong>Settings</strong>. Gulir ke bawah ke bagian "Custom Thump", masukkan beberapa kata yang dipisahkan koma (contoh: <code>Merah, Biru, Kanan, Kiri</code>), lalu simpan. Tombol-tombol tersebut akan muncul di halaman Sender untuk akses cepat.</li>
      <li><strong>Menerima Info dari Tamu:</strong> Di <strong>Menu Utama</strong>, tekan "Buat Link Tamu". Bagikan link unik tersebut kepada siapa saja. Mereka bisa mengirimkan informasi kepada Anda melalui halaman khusus tanpa perlu memiliki akun Obscura. Link ini hanya berlaku untuk satu kali koneksi.</li>
    </ul>
    
    <h2>Pemeliharaan & Bantuan</h2>
    <p>Gunakan fitur berikut untuk mengelola aplikasi Anda.</p>
    <ul>
        <li><strong>Memperbarui Aplikasi:</strong> Jika Anda merasa aplikasi tidak menampilkan versi terbaru, buka halaman ini (Panduan) lalu tekan tombol <strong>Update App</strong> di bagian atas. Ini akan membersihkan cache dan memaksa aplikasi memuat versi terbarunya.</li>
        <li><strong>Menghapus Semua Data:</strong> Di halaman <strong>Settings</strong>, tombol "Hapus Semua Jejak" akan menghapus ID Anda, koneksi, preset, dan data lainnya dari perangkat dan server. Gunakan dengan hati-hati karena tindakan ini bersifat permanen.</li>
    </ul>

    <div class="credit">
      <p>Conceptor: @pesulapgabut</p>
    </div>
  </div>

  <script>
    // Script untuk tombol force refresh tidak diubah
    const forceRefreshBtn = document.getElementById("forceRefreshBtn");
    if (forceRefreshBtn) {
        forceRefreshBtn.addEventListener("click", async () => {
            if (!confirm("Ini akan menghapus cache dan me-refresh aplikasi. Lanjutkan untuk mendapatkan versi terbaru?")) {
                return;
            }
            if ('serviceWorker' in navigator) {
                const registrations = await navigator.serviceWorker.getRegistrations();
                for (const reg of registrations) { await reg.unregister(); }
            }
            if ('caches' in window) {
                const cacheNames = await caches.keys();
                for (const name of cacheNames) { await caches.delete(name); }
            }
            alert("Aplikasi akan dimuat ulang sekarang.");
            window.location.reload(true);
        });
    }
  </script>
</body>
</html>
